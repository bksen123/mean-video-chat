"use strict";(self.webpackChunknews_track=self.webpackChunknews_track||[]).push([[255],{3255:(z,R,d)=>{d.r(R),d.d(R,{SocialLoginsModule:()=>M});var g=d(6895),I=d(8438),t=d(4650),L=d(4707),P=d(7579);class T extends P.x{constructor(){super(...arguments),this._value=null,this._hasValue=!1,this._isComplete=!1}_checkFinalizedStatuses(a){const{hasError:e,_hasValue:i,_value:n,thrownError:r,isStopped:s,_isComplete:l}=this;e?a.error(r):(s||l)&&(i&&a.next(n),a.complete())}next(a){this.isStopped||(this._value=a,this._hasValue=!0)}complete(){const{_hasValue:a,_value:e,_isComplete:i}=this;i||(this._isComplete=!0,a&&super.next(e),super.complete())}}class O{constructor(){}loadScript(a,e,i,n=null){if(typeof document<"u"&&!document.getElementById(a)){let r=document.createElement("script");r.async=!0,r.src=e,r.onload=i,n||(n=document.head),n.appendChild(r)}}}class h{}let p=(()=>{class o extends O{constructor(e,i={scope:"email"}){super(),this.clientId=e,this.initOptions=i}initialize(){return new Promise((e,i)=>{try{this.loadScript(o.PROVIDER_ID,"https://apis.google.com/js/api.js",()=>{gapi.load("client:auth2",()=>{gapi.client.init(Object.assign(Object.assign({},this.initOptions),{client_id:this.clientId})).then(()=>{this.auth2=gapi.auth2.getAuthInstance(),e()}).catch(n=>{i(n)})})})}catch(n){i(n)}})}getLoginStatus(e){const i=Object.assign(Object.assign({},this.initOptions),e);return new Promise((n,r)=>{if(this.auth2.isSignedIn.get()){const s=new h,l=this.auth2.currentUser.get().getBasicProfile(),u=this.auth2.currentUser.get().getAuthResponse(!0);this.setUserProfile(s,l),s.response=u;const c=v=>{s.authToken=v.access_token,s.idToken=v.id_token,n(s)};i.refreshToken?this.auth2.currentUser.get().reloadAuthResponse().then(c):c(u)}else r(`No user is currently logged in with ${o.PROVIDER_ID}`)})}signIn(e){const i=Object.assign(Object.assign({},this.initOptions),e);return new Promise((n,r)=>{(i&&i.offline_access?this.auth2.grantOfflineAccess(e):this.auth2.signIn(e)).then(u=>{const c=new h;if(u&&u.code)c.authorizationCode=u.code;else{const v=this.auth2.currentUser.get().getBasicProfile(),_=this.auth2.currentUser.get().getAuthResponse(!0),j=_.access_token,Z=_.id_token;this.setUserProfile(c,v),c.authToken=j,c.idToken=Z,c.response=_}n(c)},u=>{r(u)}).catch(u=>{r(u)})})}signOut(e){return new Promise((i,n)=>{let r;r=e?this.auth2.disconnect():this.auth2.signOut(),r.then(s=>{s?n(s):i()}).catch(s=>{n(s)})})}setUserProfile(e,i){e.id=i.getId(),e.name=i.getName(),e.email=i.getEmail(),e.photoUrl=i.getImageUrl(),e.firstName=i.getGivenName(),e.lastName=i.getFamilyName()}}return o.PROVIDER_ID="GOOGLE",o})(),m=(()=>{class o{constructor(e){this.providers=new Map,this.autoLogin=!1,this._user=null,this._authState=new L.t(1),this.initialized=!1,this._initState=new T,e instanceof Promise?e.then(i=>{this.initialize(i)}):this.initialize(e)}get authState(){return this._authState.asObservable()}get initState(){return this._initState.asObservable()}initialize(e){this.autoLogin=void 0!==e.autoLogin&&e.autoLogin;const{onError:i=console.error}=e;e.providers.forEach(n=>{this.providers.set(n.id,n.provider)}),Promise.all(Array.from(this.providers.values()).map(n=>n.initialize())).then(()=>{if(this.autoLogin){const n=[];let r=!1;this.providers.forEach((s,l)=>{let u=s.getLoginStatus();n.push(u),u.then(c=>{c.provider=l,this._user=c,this._authState.next(c),r=!0}).catch(console.debug)}),Promise.all(n).catch(()=>{r||(this._user=null,this._authState.next(null))})}}).catch(n=>{i(n)}).finally(()=>{this.initialized=!0,this._initState.next(this.initialized),this._initState.complete()})}refreshAuthToken(e){return new Promise((i,n)=>{if(this.initialized)if(e!==p.PROVIDER_ID)n(o.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN);else{const r=this.providers.get(e);r?r.getLoginStatus({refreshToken:!0}).then(s=>{s.provider=e,this._user=s,this._authState.next(s),i()}).catch(s=>{n(s)}):n(o.ERR_LOGIN_PROVIDER_NOT_FOUND)}else n(o.ERR_NOT_INITIALIZED)})}signIn(e,i){return new Promise((n,r)=>{if(this.initialized){let s=this.providers.get(e);s?s.signIn(i).then(l=>{l.provider=e,n(l),this._user=l,this._authState.next(l)}).catch(l=>{r(l)}):r(o.ERR_LOGIN_PROVIDER_NOT_FOUND)}else r(o.ERR_NOT_INITIALIZED)})}signOut(e=!1){return new Promise((i,n)=>{if(this.initialized)if(this._user){let s=this.providers.get(this._user.provider);s?s.signOut(e).then(()=>{i(),this._user=null,this._authState.next(null)}).catch(l=>{n(l)}):n(o.ERR_LOGIN_PROVIDER_NOT_FOUND)}else n(o.ERR_NOT_LOGGED_IN);else n(o.ERR_NOT_INITIALIZED)})}}return o.ERR_LOGIN_PROVIDER_NOT_FOUND="Login provider not found",o.ERR_NOT_LOGGED_IN="Not logged in",o.ERR_NOT_INITIALIZED="Login providers not ready yet. Are there errors on your console?",o.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN="Chosen login provider is not supported for refreshing a token",o.\u0275fac=function(e){return new(e||o)(t.LFG("SocialAuthServiceConfig"))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})(),k=(()=>{class o{constructor(e){if(e)throw new Error("SocialLoginModule is already loaded. Import it in the AppModule only")}static initialize(e){return{ngModule:o,providers:[m,{provide:"SocialAuthServiceConfig",useValue:e}]}}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(o,12))},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[m],imports:[[g.ez]]}),o})(),f=(()=>{class o extends O{constructor(e,i={}){super(),this.clientId=e,this.requestOptions={scope:"email,public_profile",locale:"en_US",fields:"name,email,picture,first_name,last_name",version:"v10.0"},this.requestOptions=Object.assign(Object.assign({},this.requestOptions),i)}initialize(){return new Promise((e,i)=>{try{this.loadScript(o.PROVIDER_ID,`//connect.facebook.net/${this.requestOptions.locale}/sdk.js`,()=>{FB.init({appId:this.clientId,autoLogAppEvents:!0,cookie:!0,xfbml:!0,version:this.requestOptions.version}),e()})}catch(n){i(n)}})}getLoginStatus(){return new Promise((e,i)=>{FB.getLoginStatus(n=>{if("connected"===n.status){let r=n.authResponse;FB.api(`/me?fields=${this.requestOptions.fields}`,s=>{let l=new h;l.id=s.id,l.name=s.name,l.email=s.email,l.photoUrl="https://graph.facebook.com/"+s.id+"/picture?type=normal&access_token="+r.accessToken,l.firstName=s.first_name,l.lastName=s.last_name,l.authToken=r.accessToken,l.response=s,e(l)})}else i(`No user is currently logged in with ${o.PROVIDER_ID}`)})})}signIn(e){const i=Object.assign(Object.assign({},this.requestOptions),e);return new Promise((n,r)=>{FB.login(s=>{if(s.authResponse){let l=s.authResponse;FB.api(`/me?fields=${i.fields}`,u=>{let c=new h;c.id=u.id,c.name=u.name,c.email=u.email,c.photoUrl="https://graph.facebook.com/"+u.id+"/picture?type=normal",c.firstName=u.first_name,c.lastName=u.last_name,c.authToken=l.accessToken,c.response=u,n(c)})}else r("User cancelled login or did not fully authorize.")},i)})}signOut(){return new Promise((e,i)=>{FB.logout(n=>{e()})})}}return o.PROVIDER_ID="FACEBOOK",o})();function y(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",14)(1,"h3"),t._uU(2,"Login With Facebook"),t.qZA(),t.TgZ(3,"button",15),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.loginWithFacbook())}),t._uU(4,"Login with Facebook"),t.qZA()()}}function A(o,a){1&o&&(t.TgZ(0,"div",14)(1,"h2"),t._uU(2,"Facebook Login Success"),t.qZA()())}function D(o,a){if(1&o&&(t.TgZ(0,"div")(1,"h3"),t._uU(2,"We've just show the resposnce from the facebook and after that you can save the info in your DB"),t.qZA(),t._UZ(3,"pre",16),t.ALo(4,"json"),t.qZA()),2&o){const e=t.oxw();t.xp6(3),t.Q6J("innerHTML",t.lcZ(4,1,e.socialUser),t.oJD)}}let w=(()=>{class o{constructor(e){this.socialAuthService=e,this.socialUser=new h,this.isLoggedin=!1}ngOnInit(){this.socialAuthService.authState.subscribe(e=>{this.socialUser=e,this.isLoggedin=null!=e})}loginWithFacbook(){this.socialAuthService.signIn(f.PROVIDER_ID).then(e=>{e.thoken&&(this.socialUser=e,this.isLoggedin=null!=e,this.doLoginWithdb())})}doLoginWithdb(){}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-fb-login"]],decls:28,vars:3,consts:[[1,"container","h-100"],[1,"row","mt-4"],[1,"col-md-12"],[1,"card","h-100","m-auto","w-50"],[1,"d-flex","custom-border"],[1,"secondary-bg"],[1,"primary-bg"],[1,"p-5"],[1,"card-body"],[1,"row"],[1,"col-md-12","text-center"],["class","text-center",4,"ngIf"],[4,"ngIf"],[1,""],[1,"text-center"],["type","button",1,"btn","btn-danger",3,"click"],[3,"innerHTML"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"h2"),t._uU(2,"Login With Google"),t.qZA(),t._UZ(3,"hr"),t.TgZ(4,"div",1)(5,"div",2)(6,"div",3)(7,"div",4),t._UZ(8,"span",5)(9,"span",6)(10,"span",5)(11,"span",6),t.qZA(),t.TgZ(12,"div",7)(13,"div",8)(14,"div",9)(15,"div",10),t.YNc(16,y,5,0,"div",11),t.YNc(17,A,3,0,"div",11),t.qZA()(),t.YNc(18,D,5,3,"div",12),t.qZA()()(),t.TgZ(19,"div")(20,"ul",13)(21,"li"),t._uU(22,"Need to create gcloud id Here the process => "),t.TgZ(23,"ul")(24,"li"),t._uU(25,"login developer facebook website => click on find the Create App Button and click on it => after that filled the required field"),t.qZA(),t.TgZ(26,"li"),t._uU(27,"after completing all the process you can see the App ID, copy the App ID and add your module"),t.qZA()()()()()()()()),2&e&&(t.xp6(16),t.Q6J("ngIf",!i.isLoggedin),t.xp6(1),t.Q6J("ngIf",i.isLoggedin),t.xp6(1),t.Q6J("ngIf",i.isLoggedin))},dependencies:[g.O5,g.Ts]}),o})();function S(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",14)(1,"h3"),t._uU(2,"Login With Google"),t.qZA(),t.TgZ(3,"button",15),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.loginWithGoogle())}),t._uU(4,"Login with Google"),t.qZA()()}}function E(o,a){1&o&&(t.TgZ(0,"div",14)(1,"h2"),t._uU(2,"Google Login Success"),t.qZA()())}function U(o,a){if(1&o&&(t.TgZ(0,"div")(1,"h3"),t._uU(2,"We've just show the resposnce from the google and after that you can save the info in your DB"),t.qZA(),t._UZ(3,"pre",16),t.ALo(4,"json"),t.qZA()),2&o){const e=t.oxw();t.xp6(3),t.Q6J("innerHTML",t.lcZ(4,1,e.socialUser),t.oJD)}}const b=[{path:"google-login",component:(()=>{class o{constructor(e){this.socialAuthService=e,this.socialUser=new h,this.isLoggedin=!1}ngOnInit(){}loginWithGoogle(){this.socialAuthService.signIn(p.PROVIDER_ID).then(e=>{console.log(e.email,"response === ",e),e.authToken&&(this.socialUser=e,this.isLoggedin=null!=e,this.doLoginWithdb())})}doLoginWithdb(){}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-google-login"]],decls:28,vars:3,consts:[[1,"container","h-100"],[1,"row","mt-4"],[1,"col-md-12"],[1,"card","h-100","m-auto","w-50"],[1,"d-flex","custom-border"],[1,"secondary-bg"],[1,"primary-bg"],[1,"p-5"],[1,"card-body"],[1,"row"],[1,"col-md-12","text-center"],["class","text-center",4,"ngIf"],[4,"ngIf"],[1,""],[1,"text-center"],["type","button",1,"btn","btn-danger",3,"click"],[3,"innerHTML"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"h2"),t._uU(2,"Login With Google"),t.qZA(),t._UZ(3,"hr"),t.TgZ(4,"div",1)(5,"div",2)(6,"div",3)(7,"div",4),t._UZ(8,"span",5)(9,"span",6)(10,"span",5)(11,"span",6),t.qZA(),t.TgZ(12,"div",7)(13,"div",8)(14,"div",9)(15,"div",10),t.YNc(16,S,5,0,"div",11),t.YNc(17,E,3,0,"div",11),t.qZA()(),t.YNc(18,U,5,3,"div",12),t.qZA()()(),t.TgZ(19,"div")(20,"ul",13)(21,"li"),t._uU(22,"Need to create gcloud id Here the process => "),t.TgZ(23,"ul")(24,"li"),t._uU(25,"login Google console => click on api and services menu in the left sidebar => after that click on creadentials"),t.qZA(),t.TgZ(26,"li"),t._uU(27,"where you can see the option and create the creadentials after that you can see the tokens"),t.qZA()()()()()()()()),2&e&&(t.xp6(16),t.Q6J("ngIf",!i.isLoggedin),t.xp6(1),t.Q6J("ngIf",i.isLoggedin),t.xp6(1),t.Q6J("ngIf",i.isLoggedin))},dependencies:[g.O5,g.Ts]}),o})(),pathMatch:"full"},{path:"fb-login",component:w,pathMatch:"full"}];let N=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[I.Bz.forChild(b),I.Bz]}),o})(),M=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[{provide:"SocialAuthServiceConfig",useValue:{autoLogin:!1,providers:[{id:p.PROVIDER_ID,provider:new p("1051803384347-91967jipju1ume5ul4dcr5g84bfaja56.apps.googleusercontent.com")},{id:f.PROVIDER_ID,provider:new f("1021719995343949")}]}}],imports:[g.ez,N,k]}),o})()}}]);