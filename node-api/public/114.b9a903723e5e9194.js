"use strict";(self.webpackChunkmean_video_chat=self.webpackChunkmean_video_chat||[]).push([[114],{1114:(j,U,l)=>{l.r(U),l.d(U,{UsersModule:()=>Q});var c=l(9942),_=l(3317),g=l(5415),f=l(5905),C=l(7579),h=l(2340);class Z{constructor(){this.userName="",this.email="",this.status=1,this.role=h.N.role.userRole}}class A{constructor(){this.userName="",this.email="",this.role=""}}var e=l(4650),M=l(6405),v=l(7185),T=l(6355),m=l(6895),u=l(433),x=l(8984);const N=["showAddEditUserModal"],k=["deleteUserModal"];function y(i,o){if(1&i){const s=e.EpF();e.TgZ(0,"tr")(1,"th",47),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"td")(13,"ui-switch",48),e.NdJ("change",function(){const n=e.CHM(s).$implicit,a=e.oxw();return e.KtG(a.changeUserStatus(n))})("ngModelChange",function(r){const a=e.CHM(s).$implicit;return e.KtG(a.status=r)}),e.qZA()(),e.TgZ(14,"td",9)(15,"div",49)(16,"button",50),e.NdJ("click",function(){const n=e.CHM(s).$implicit,a=e.oxw();return e.KtG(a.showAddEditModal(n))}),e._UZ(17,"i",51),e.qZA(),e.TgZ(18,"button",52),e.NdJ("click",function(){const n=e.CHM(s).$implicit,a=e.oxw();return e.KtG(a.showUserDeleteModal(n))}),e._UZ(19,"i",53),e.qZA()()()()}if(2&i){const s=o.$implicit,t=o.index;e.xp6(2),e.Oqu(t+1),e.xp6(2),e.Oqu(s.userName),e.xp6(2),e.Oqu(s.email),e.xp6(2),e.Oqu("admin"===s.role?"Admin":"User"),e.xp6(2),e.Oqu(e.xi3(11,6,s.createdAt,"d/M/yyyy")),e.xp6(3),e.Q6J("ngModel",s.status)}}function J(i,o){1&i&&(e.TgZ(0,"span",54),e._uU(1,"@amwebtech.com"),e.qZA())}function q(i,o){1&i&&(e.TgZ(0,"div",55),e._uU(1,"You Can't change the user email address."),e.qZA())}function w(i,o){1&i&&(e.TgZ(0,"p",56),e._uU(1," Please enter valid email. "),e.qZA())}function E(i,o){1&i&&(e.TgZ(0,"p",57),e._uU(1," This Email Already Exists, please try another one. "),e.qZA())}function I(i,o){if(1&i&&(e.TgZ(0,"option",58),e._uU(1),e.qZA()),2&i){const s=o.$implicit;e.Q6J("value",s),e.xp6(1),e.hij(" ","admin"===s?"Admin":"User"," ")}}const b=function(){return{backdrop:"static",keyboard:!1,animated:!0}},O=[{path:"",component:(()=>{class i{constructor(s,t,r,n,a){this.globalService=s,this.usersService=t,this.spinner=r,this.toastr=n,this.alertService=a,this.userInfo=new Z,this.userRoles=h.N.role,this.usersList=[],this.datatableElement=g.G,this.dtOptions={},this.dtTrigger=new C.x,this.newUserAlready=!1,this.showAddEditUserModal=f.oB,this.deleteUserModal=f.oB,this.requiredValidation=new A,this.inValidateCheck={email:!1,emailExits:!0},this.getUsersList()}ngOnInit(){this.dtOptions={responsive:!0,scrollX:!0,scrollY:"300px",scrollCollapse:!0,columnDefs:[{targets:5,orderable:!1,searchable:!1},{targets:6,orderable:!1,searchable:!1}]},this.userRoles=Object.values(this.userRoles)}ngAfterViewInit(){this.dtTrigger.next("")}getUsersList(){this.usersService.getUsersList().subscribe(s=>{this.spinner.show(),200==s.status&&(this.spinner.hide(),this.datatableElement.dtInstance.then(t=>{t.destroy(),this.dtTrigger.next(""),this.usersList=s.data,this.spinner.hide()}))},s=>{this.spinner.hide(),this.toastr.error(s.message,"Error!")})}checkvalidation(s){return{...this.userInfo}[s]?"text-primary":"text-danger"}patternMatchCheck(s,t){if(s){const r=this.globalService.patternMatchRegex(s,t);this.inValidateCheck[t]=r,this.inValidateCheck[t]&&"email"===t?(t="emailExits",this.usersService.emailAlreadyExists({email:s+=h.N.emaildomain}).subscribe(n=>{this.inValidateCheck[t]=200!==n.status},n=>{this.inValidateCheck[t]=!1})):(this.inValidateCheck[t]=r,this.inValidateCheck.emailExits=!0)}else this.inValidateCheck[t]=!0}showAddEditModal(s){this.alertService.clear(),this.inValidateCheck.emailExits=!0,s&&s._id?(this.inValidateCheck.email=!0,this.userInfo=Object.assign({},s)):this.userInfo=new Z,this.showAddEditUserModal.show()}closeModel(){this.showAddEditUserModal.hide(),this.deleteUserModal.hide()}showUserDeleteModal(s){this.userInfo=s,this.deleteUserModal.show()}addUser(){const s=this,t=Object.keys(this.requiredValidation);let r=JSON.parse(JSON.stringify(s.userInfo));const n=t.filter(d=>!r[d]),a=Object.keys(this.inValidateCheck).filter(d=>!s.inValidateCheck[d]);if(this.spinner.show(),n.length||a.length)return this.alertService.clear(),this.alertService.error("*Please Fill All Fields are mandatory."),this.spinner.hide(),!1;let p=JSON.parse(JSON.stringify(this.userInfo));p._id||(p.email=p.email+h.N.emaildomain),this.usersService.saveUserInfo(p).subscribe(d=>{200===d.status&&(this.spinner.hide(),this.toastr.success(d.message,"Success!"),d=d.data,this.closeModel(),this.getUsersList())},d=>{this.spinner.hide(),this.toastr.error(d.message,"Error!")})}deleteUser(){this.spinner.show(),this.usersService.deleteUser(this.userInfo).subscribe(s=>{200===s.status&&(this.closeModel(),this.spinner.hide(),this.getUsersList(),this.toastr.success("User deleted successfully.","Success"))},s=>{this.closeModel(),this.spinner.hide(),this.toastr.error("There are some server error. Please check connection.","Error")})}changeUserStatus(s){this.usersService.saveUserInfo({_id:s._id,status:s.status?0:1}).subscribe(r=>{if(200===r.status){r=r.data,this.spinner.hide(),this.toastr.success("User status has been changed successfully.","Success!");let n=this.usersList.findIndex(a=>a._id===r._id);n&&(this.usersList[n].status=r.status)}},r=>{this.spinner.hide(),this.toastr.error(r.message,"Error!")})}}return i.\u0275fac=function(s){return new(s||i)(e.Y36(c.Uh),e.Y36(c.fz),e.Y36(M.t2),e.Y36(v._W),e.Y36(c.c9))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-users"]],viewQuery:function(s,t){if(1&s&&(e.Gf(g.G,5),e.Gf(N,5),e.Gf(k,5)),2&s){let r;e.iGM(r=e.CRH())&&(t.datatableElement=r.first),e.iGM(r=e.CRH())&&(t.showAddEditUserModal=r.first),e.iGM(r=e.CRH())&&(t.deleteUserModal=r.first)}},decls:92,vars:21,consts:[[1,"d-flex","flex-row"],[1,"col-12"],[1,"text-primary"],[1,"fa","fa-users"],[1,"btn","btn-primary","pt-1","pb-1","pull-right",3,"click"],[1,"fas","fa-plus","me-2"],[1,"container-fluid","card","p-3",2,"min-height","500px"],["datatable","",1,"table","table-bordered","table-hover","table-striped",3,"dtOptions","dtTrigger"],[1,"text-nowrap"],[1,"text-center"],[1,"text-wrap"],[4,"ngFor","ngForOf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade",3,"config"],["showAddEditUserModal","bs-modal"],["role","document",1,"modal-dialog","modal-dialog-centered","modal-dialog-scrollable"],[1,"modal-content"],[1,"modal-header","pt-1","pb-1"],[1,"modal-title"],[1,"fa","fa-user"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row","row-xs","align-items-center"],[1,"mb-3"],["for","userName",1,"form-label"],[3,"ngClass"],[1,"fas","fa-star","fa-xs"],["type","text","id","userName","maxlength","15","placeholder","Enter userName","name","userName",1,"form-control",3,"ngModel","ngModelChange"],["for","Email",1,"form-label"],[1,"input-group"],["type","text","id","Email","placeholder","Enter Email Address","autocomplete","off","maxlength","15","name","email",1,"form-control",3,"ngModel","disabled","ngModelChange"],["class","input-group-text",4,"ngIf"],["id","emailHelp","class","form-text",4,"ngIf"],["class","alert fade alert-danger show mt-1 mb-0","role","alert",4,"ngIf"],["class","alert alert-danger mt-1 mb-0","role","alert",4,"ngIf"],["for","role",1,"form-label"],["id","role","name","role",1,"form-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"modal-footer","border-top-0","justify-content-start"],["type","submit",1,"btn","btn-primary","pt-1","pb-1",3,"click"],["deleteUserModal","bs-modal"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-header"],[1,"fa","fa-trash"],[1,"modal-footer","border-top-0","d-flex","justify-content-start"],["type","button",1,"btn","btn-default","me-1",3,"click"],["type","button",1,"btn","btn-danger","text-white",3,"click"],["scope","row"],["color","#4285F4","defaultBgColor","#d9d9d9","labelOn","Active","labelOff","Inactive",3,"ngModel","change","ngModelChange"],[1,"d-flex","justify-content-center"],["type","button",1,"btn","btn-sm","edit","me-1",3,"click"],[1,"far","fa-edit"],["type","button",1,"btn","btn-sm","delete",3,"click"],[1,"far","fa-trash-alt"],[1,"input-group-text"],["id","emailHelp",1,"form-text"],["role","alert",1,"alert","fade","alert-danger","show","mt-1","mb-0"],["role","alert",1,"alert","alert-danger","mt-1","mb-0"],[3,"value"]],template:function(s,t){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),e._UZ(3,"i",3),e._uU(4," AMW Users "),e.TgZ(5,"button",4),e.NdJ("click",function(){return t.showAddEditModal()}),e._UZ(6,"i",5),e._uU(7,"Add New"),e.qZA()(),e._UZ(8,"hr"),e.qZA()(),e.TgZ(9,"div",6)(10,"table",7)(11,"thead")(12,"tr",8)(13,"th"),e._uU(14,"S.No"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Username"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Email I'd"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Role"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"Created At"),e.qZA(),e.TgZ(23,"th"),e._uU(24,"Status"),e.qZA(),e.TgZ(25,"th",9),e._uU(26,"Actions"),e.qZA()()(),e.TgZ(27,"tbody",10),e.YNc(28,y,20,9,"tr",11),e.qZA()()(),e.TgZ(29,"div",12,13)(31,"div",14)(32,"div",15)(33,"div",16)(34,"h5",17),e._UZ(35,"i",18),e._uU(36),e.qZA(),e.TgZ(37,"button",19),e.NdJ("click",function(){return t.closeModel()}),e.TgZ(38,"span",20),e._uU(39,"\xd7"),e.qZA()()(),e.TgZ(40,"div",21)(41,"div",22)(42,"div",23)(43,"label",24),e._uU(44,"User's Full Name "),e.TgZ(45,"sup",25),e._UZ(46,"i",26),e.qZA()(),e.TgZ(47,"input",27),e.NdJ("ngModelChange",function(n){return t.userInfo.userName=n}),e.qZA()(),e.TgZ(48,"div",23)(49,"label",28),e._uU(50,"Email address "),e.TgZ(51,"sup",25),e._UZ(52,"i",26),e.qZA()(),e.TgZ(53,"div",29)(54,"input",30),e.NdJ("ngModelChange",function(n){return t.userInfo.email=n})("ngModelChange",function(){return t.patternMatchCheck(t.userInfo.email,"email")}),e.qZA(),e.YNc(55,J,2,0,"span",31),e.qZA(),e.YNc(56,q,2,0,"div",32),e.YNc(57,w,2,0,"p",33),e.YNc(58,E,2,0,"p",34),e.qZA(),e.TgZ(59,"div",23)(60,"label",35),e._uU(61,"User Role"),e.qZA(),e.TgZ(62,"select",36),e.NdJ("ngModelChange",function(n){return t.userInfo.role=n}),e.YNc(63,I,2,2,"option",37),e.qZA()()()(),e._UZ(64,"app-alert"),e.TgZ(65,"div",38)(66,"button",39),e.NdJ("click",function(){return t.addUser()}),e._uU(67),e.qZA()()()()(),e.TgZ(68,"div",12,40)(70,"div",41)(71,"div",15)(72,"div",42)(73,"h5",17),e._UZ(74,"i",43),e._uU(75," Delete User"),e.qZA(),e.TgZ(76,"button",19),e.NdJ("click",function(){return t.closeModel()}),e.TgZ(77,"span",20),e._uU(78,"\xd7"),e.qZA()()(),e.TgZ(79,"div",21)(80,"h6"),e._uU(81,"Are you sure want to delete this User?"),e.qZA(),e.TgZ(82,"p")(83,"b"),e._uU(84,"User Name :"),e.qZA(),e._uU(85),e._UZ(86,"br"),e.qZA()(),e.TgZ(87,"div",44)(88,"button",45),e.NdJ("click",function(){return t.closeModel()}),e._uU(89,"Close"),e.qZA(),e.TgZ(90,"button",46),e.NdJ("click",function(){return t.deleteUser()}),e._uU(91,"Delete"),e.qZA()()()()()),2&s&&(e.xp6(10),e.Q6J("dtOptions",t.dtOptions)("dtTrigger",t.dtTrigger),e.xp6(18),e.Q6J("ngForOf",t.usersList),e.xp6(1),e.Q6J("config",e.DdM(19,b)),e.xp6(7),e.hij(" ",t.userInfo._id?"Edit":"Add"," User"),e.xp6(9),e.Q6J("ngClass",t.checkvalidation("userName")),e.xp6(2),e.Q6J("ngModel",t.userInfo.userName),e.xp6(4),e.Q6J("ngClass",t.checkvalidation("email")),e.xp6(3),e.Q6J("ngModel",t.userInfo.email)("disabled",!!t.userInfo._id),e.xp6(1),e.Q6J("ngIf",!t.userInfo._id),e.xp6(1),e.Q6J("ngIf",t.userInfo._id),e.xp6(1),e.Q6J("ngIf",t.userInfo.email&&!t.inValidateCheck.email&&!t.userInfo._id),e.xp6(1),e.Q6J("ngIf",!t.inValidateCheck.emailExits),e.xp6(4),e.Q6J("ngModel",t.userInfo.role),e.xp6(1),e.Q6J("ngForOf",t.userRoles),e.xp6(4),e.hij("",t.userInfo._id?"Update":"Add"," "),e.xp6(1),e.Q6J("config",e.DdM(20,b)),e.xp6(17),e.hij(" ",t.userInfo.userName," "))},dependencies:[T.w,m.mk,m.sg,m.O5,u.YN,u.Kr,u.Fj,u.EJ,u.JJ,u.nD,u.On,g.G,f.oB,x.o,m.uU]}),i})(),pathMatch:"full"}];let S=(()=>{class i{}return i.\u0275fac=function(s){return new(s||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[_.Bz.forChild(O),_.Bz]}),i})(),Q=(()=>{class i{}return i.\u0275fac=function(s){return new(s||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[c.eY,S]}),i})()}}]);